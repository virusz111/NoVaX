<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoVaX RP | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚Ø© 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* --- Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙÙ†ÙŠ --- */
        :root { 
            --primary: #a246f0; --primary-dark: #7a2bc7; --bg: #050507; 
            --card-bg: rgba(18, 18, 24, 0.98); --text: #ffffff; 
            --danger: #ff4757; --success: #2ed573; --kick: #53fc18; --warning: #ffa502;
        }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: var(--text); margin: 0; overflow-x: hidden; scroll-behavior: smooth; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ --- */
        header { 
            background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); 
            padding: 15px 6%; display: flex; justify-content: space-between; 
            align-items: center; border-bottom: 3px solid var(--primary); 
            position: sticky; top: 0; z-index: 2000; box-shadow: 0 4px 20px rgba(0,0,0,0.8);
        }
        .logo { font-size: 30px; font-weight: 900; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 15px rgba(162, 70, 240, 0.5); }
        
        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ§Ø¨Ø§Øª (Tabs) --- */
        .nav-tabs { 
            display: flex; justify-content: center; gap: 12px; background: #0a0a0c; 
            padding: 15px; border-bottom: 1px solid rgba(162, 70, 240, 0.15); overflow-x: auto; 
        }
        .tab-btn { 
            cursor: pointer; padding: 12px 25px; border-radius: 15px; font-weight: 700; 
            transition: all 0.4s ease; opacity: 0.5; color: white; border: 1px solid transparent; 
            white-space: nowrap; display: flex; align-items: center; gap: 8px;
        }
        .tab-btn:hover { opacity: 0.8; background: rgba(162, 70, 240, 0.1); }
        .tab-btn.active { opacity: 1; background: rgba(162, 70, 240, 0.2); border-color: var(--primary); color: var(--primary); transform: scale(1.05); }

        /* --- Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª --- */
        .container { max-width: 1300px; margin: 30px auto; padding: 0 20px; }
        .page-content { display: none; }
        .page-content.active { display: block !important; animation: slideUp 0.6s ease; }
        
        .card { 
            background: var(--card-bg); padding: 35px; border-radius: 30px; 
            border: 1px solid rgba(255, 255, 255, 0.03); text-align: center; 
            margin-bottom: 30px; position: relative; overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
        }
        .card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, transparent, var(--primary), transparent); }

        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø·ÙˆØ± (Store) --- */
        .store-sections { margin-bottom: 40px; }
        .section-title { font-size: 24px; color: var(--primary); margin: 20px 0; display: flex; align-items: center; gap: 10px; justify-content: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        
        .item-card { 
            background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(162, 70, 240, 0.1); 
            border-radius: 25px; padding: 25px; transition: 0.5s; position: relative;
        }
        .item-card:hover { transform: translateY(-15px); border-color: var(--primary); background: rgba(162, 70, 240, 0.05); }
        .item-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        .price { font-size: 28px; font-weight: 900; color: var(--success); margin: 15px 0; }
        
        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø³ØªØ±ÙŠÙ… (Kick UI) --- */
        .kick-section { border-top: 3px solid var(--kick); }
        .streams-container { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 25px; }
        .stream-box { 
            background: rgba(83, 252, 24, 0.04); border: 1px solid rgba(83, 252, 24, 0.1); 
            border-radius: 20px; padding: 20px; width: 140px; text-align: center; transition: 0.3s;
        }
        .stream-box:hover { border-color: var(--kick); background: rgba(83, 252, 24, 0.08); }
        .stream-box img { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--kick); margin-bottom: 12px; }
        .live-tag { background: var(--kick); color: black; font-size: 10px; font-weight: 900; padding: 3px 8px; border-radius: 5px; position: absolute; top: 15px; right: 15px; }

        /* --- Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ÙˆØ§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† --- */
        .rules-list { text-align: right; background: rgba(0,0,0,0.2); padding: 20px; border-radius: 15px; }
        .rule-item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }

        /* --- Ø§Ù„Ø£Ø²Ø±Ø§Ø± --- */
        .btn { 
            padding: 14px 30px; border-radius: 15px; cursor: pointer; font-weight: 800; 
            border: none; font-family: 'Cairo'; transition: 0.4s; text-decoration: none; 
            display: inline-flex; align-items: center; gap: 10px; justify-content: center;
        }
        .btn-p { background: var(--primary); color: white; box-shadow: 0 8px 25px rgba(162, 70, 240, 0.3); }
        .btn-p:hover { background: var(--primary-dark); transform: scale(1.05); }
        .btn-kick { background: var(--kick); color: #000; width: 100%; font-size: 13px; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

        /* --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø¬Ù„ --- */
        .user-panel { display: flex; align-items: center; gap: 15px; background: rgba(162, 70, 240, 0.1); padding: 8px 18px; border-radius: 40px; border: 1px solid var(--primary); }
        #userAvatar { width: 38px; border-radius: 50%; border: 2px solid var(--primary); }

        @media (max-width: 768px) { .nav-tabs { justify-content: flex-start; } .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<header>
    <div class="logo">NoVaX RP</div>
    <div id="userInfo" class="hidden">
        <div class="user-panel">
            <img id="userAvatar" src="">
            <span id="userName" style="font-weight: 700; font-size: 15px;"></span>
            <i class="fas fa-chevron-down" style="font-size: 12px; opacity: 0.5;"></i>
        </div>
    </div>
    <a id="loginBtn" href="https://discord.com/api/oauth2/authorize?client_id=YOUR_CLIENT_ID&redirect_uri=YOUR_URL&response_type=token&scope=identify" class="btn btn-p">
        <i class="fab fa-discord"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    </a>
</header>

<div class="nav-tabs">
    <div class="tab-btn active" onclick="switchPage('home', this)"><i class="fas fa-ghost"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="tab-btn" onclick="switchPage('rules', this)"><i class="fas fa-gavel"></i> Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</div>
    <div class="tab-btn" onclick="switchPage('store', this)"><i class="fas fa-shopping-bag"></i> Ø§Ù„Ù…ØªØ¬Ø±</div>
    <div class="tab-btn" onclick="switchPage('apply', this)"><i class="fas fa-file-pen"></i> Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</div>
    <div id="adminTab" class="tab-btn hidden" onclick="switchPage('admin', this)" style="color: var(--danger);"><i class="fas fa-user-secret"></i> Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
</div>

<div class="container">
    <section id="home-page" class="page-content active">
        <div class="card">
            <h1 style="font-size: 50px; font-weight: 900; margin-bottom: 5px;">NoVaX <span style="color:var(--primary)">COMMUNITY</span></h1>
            <p style="font-size: 20px; opacity: 0.7; max-width: 700px; margin: 0 auto 30px;">Ù†Ø­Ù† Ù„Ø§ Ù†Ù‚Ø¯Ù… Ù…Ø¬Ø±Ø¯ Ø³ÙŠØ±ÙØ±ØŒ Ù†Ø­Ù† Ù†Ù‚Ø¯Ù… ØªØ¬Ø±Ø¨Ø© Ø­ÙŠØ§Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª.</p>
            <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                <a href="https://discord.gg/HZFb5BZ8dZ" class="btn btn-p" style="padding: 15px 40px;"><i class="fab fa-discord"></i> Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</a>
                <a href="#rules" onclick="switchPage('rules')" class="btn" style="background: #1a1a1c; border: 1px solid #333;">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†</a>
            </div>
        </div>

        <div class="card kick-section">
            <h2 style="color: var(--kick);"><i class="fas fa-video"></i> Ø¨Ø«ÙˆØ« Ù…Ø¨Ø§Ø´Ø±Ø© Ø§Ù„Ø¢Ù†</h2>
            <div id="kick-streams-home" class="streams-container">
                </div>
        </div>
    </section>

    <section id="rules-page" class="page-content">
        <div class="card">
            <h2>ğŸ“œ Ù‚ÙˆØ§Ù†ÙŠÙ† ÙˆØ´Ø±ÙˆØ· Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</h2>
            <div class="rules-list">
                <div class="rule-item"><h3>1. Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ù…ØªØ¨Ø§Ø¯Ù„</h3><p>ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø³Ø¨ Ø£Ùˆ Ø§Ù„Ù‚Ø°Ù Ø¨Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹Ù‡ Ø®Ø§Ø±Ø¬ Ø¥Ø·Ø§Ø± Ø§Ù„Ø±ÙˆÙ„ Ø¨Ù„Ø§ÙŠ.</p></div>
                <div class="rule-item"><h3>2. Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¹Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© (FailRP)</h3><p>ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµØ±ÙØ§Øª ÙˆØ§Ù„Ù‚ÙŠØ§Ø¯Ø©.</p></div>
                <div class="rule-item"><h3>3. Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ (Combat Log)</h3><p>ÙŠÙ…Ù†Ø¹ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø£Ø«Ù†Ø§Ø¡ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ù…ÙØªÙˆØ­ Ù…Ø¹ Ø§Ù„Ø´Ø±Ø·Ø© Ø£Ùˆ Ø§Ù„Ø¹ØµØ§Ø¨Ø§Øª.</p></div>
                <div class="rule-item"><h3>4. Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø±Ù‚Ø§Øª</h3><p>ÙŠØ¬Ø¨ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„Ø³Ø±Ù‚Ø§Øª Ø§Ù„ÙƒØ¨Ø±Ù‰ (Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ).</p></div>
            </div>
        </div>
    </section>

    <section id="store-page" class="page-content">
        <div class="store-sections">
            <h2 class="section-title"><i class="fas fa-crown"></i> Ø­Ø²Ù… Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© (VIP)</h2>
            <div class="grid">
                <div class="item-card">
                    <div class="live-tag" style="background:var(--warning)">HOT</div>
                    <img src="https://media.discordapp.net/attachments/111/vip_gold.png" onerror="this.src='https://via.placeholder.com/400x250?text=VIP+GOLD'">
                    <h3>Ø¹Ø¶ÙˆÙŠØ© Ù†ÙˆÙØ§ÙƒØ³ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©</h3>
                    <p>Ø£ÙˆÙ„ÙˆÙŠØ© Ø¯Ø®ÙˆÙ„ (Queue)ØŒ Ù…Ù†Ø²Ù„ Ø®Ø§ØµØŒ Ø³ÙŠØ§Ø±Ø© Ù…Ù† Ø§Ø®ØªÙŠØ§Ø±Ùƒ.</p>
                    <div class="price">45$ <span style="font-size: 14px; opacity: 0.5;">/ Ø´Ù‡Ø±ÙŠØ§Ù‹</span></div>
                    <button onclick="buy('VIP Gold')" class="btn btn-p" style="width: 100%;">Ø·Ù„Ø¨ Ø§Ù„Ø­Ø²Ù…Ø©</button>
                </div>
                <div class="item-card">
                    <img src="https://media.discordapp.net/attachments/111/vip_silver.png" onerror="this.src='https://via.placeholder.com/400x250?text=VIP+SILVER'">
                    <h3>Ø¹Ø¶ÙˆÙŠØ© Ù†ÙˆÙØ§ÙƒØ³ Ø§Ù„ÙØ¶ÙŠØ©</h3>
                    <p>Ø³ÙŠØ§Ø±Ø© Ù…Ù…ÙŠØ²Ø©ØŒ Ø±ØªØ¨Ø© Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ØŒ 500k ÙƒØ§Ø´ Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©.</p>
                    <div class="price">25$</div>
                    <button onclick="buy('VIP Silver')" class="btn btn-p" style="width: 100%;">Ø·Ù„Ø¨ Ø§Ù„Ø­Ø²Ù…Ø©</button>
                </div>
            </div>
        </div>
    </section>

    <section id="apply-page" class="page-content">
        <div class="card">
            <h2>ğŸ“ ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø§Ù†Ø¶Ù…Ø§Ù…</h2>
            <div id="apply-locked">
                <i class="fas fa-lock" style="font-size: 50px; color: var(--danger); margin-bottom: 20px;"></i>
                <p>ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ….</p>
                <button onclick="document.getElementById('loginBtn').click()" class="btn btn-p">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø§Ù„Ø¢Ù†</button>
            </div>
            <form id="realApplyForm" class="hidden" onsubmit="handleApply(event)">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <input type="text" id="steamName" placeholder="Ø§Ø³Ù…Ùƒ ÙÙŠ Ø³ØªÙŠÙ…" required>
                    <input type="number" id="playerAge" placeholder="Ø¹Ù…Ø±Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ" required>
                </div>
                <select id="jobType" required>
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</option>
                    <option value="police">Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø´Ø±Ø·Ø©</option>
                    <option value="ems">Ø§Ù„Ø§Ø³Ø¹Ø§Ù (EMS)</option>
                    <option value="mechanic">Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ</option>
                </select>
                <textarea id="reason" rows="5" placeholder="Ù„Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„ÙŠÙ†Ø§ØŸ Ø§Ø°ÙƒØ± Ø®Ø¨Ø±Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©..."></textarea>
                <button type="submit" class="btn btn-p" style="margin-top: 20px; width: 200px;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
            </form>
        </div>
    </section>

    <section id="admin-page" class="page-content">
        <div class="card">
            <h2 style="color: var(--danger);">ğŸ›¡ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</h2>
            <div class="grid">
                <div class="card" style="background: rgba(0,0,0,0.4);">
                    <h3>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù…ÙˆÙ‚Ø¹</h3>
                    <textarea id="admin_msg" placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§..."></textarea>
                    <button onclick="publishAnn()" class="btn btn-danger" style="margin-top: 15px;">Ù†Ø´Ø± Ø§Ù„Ø¢Ù†</button>
                </div>
                <div class="card" style="background: rgba(0,0,0,0.4);">
                    <h3>Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <button class="btn btn-p" style="width: 100%; margin-bottom: 10px;">ÙØªØ­ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
                    <button class="btn btn-danger" style="width: 100%;">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    /* --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø±Ùƒ --- */
    const streamers = [
        { id: "zxm-1", name: "ZXM", pic: "https://r2.kick.com/avatars/default-avatar.png" },
        { id: "king-rp", name: "KING", pic: "https://r2.kick.com/avatars/default-avatar.png" },
        { id: "nova-stream", name: "NOVA", pic: "https://r2.kick.com/avatars/default-avatar.png" }
    ];

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ
    function switchPage(pageId, btn) {
        if (pageId === 'admin' && !window.currentUser) {
            alert("ğŸ”’ Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØµÙˆÙ„ ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ù‡Ø§! ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ¯ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ.");
            return;
        }
        document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        
        const target = document.getElementById(pageId + '-page');
        if(target) target.classList.add('active');
        if(btn) btn.classList.add('active');
        window.scrollTo(0,0);
    }

    // Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø«ÙˆØ« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
    function initKickSystem() {
        const container = document.getElementById('kick-streams-home');
        if(!container) return;
        container.innerHTML = streamers.map(s => `
            <div class="stream-box">
                <div style="position:relative">
                    <img src="${s.pic}" onerror="this.src='https://ui-avatars.com/api/?name=${s.name}&background=53fc18&color=000&bold=true'">
                    <span class="live-tag">LIVE</span>
                </div>
                <h3 style="font-size:14px; margin:5px 0;">${s.name}</h3>
                <a href="https://kick.com/${s.id}" target="_blank" class="btn btn-kick">Ù…Ø´Ø§Ù‡Ø¯Ø©</a>
            </div>
        `).join('');
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
    window.onload = async () => {
        initKickSystem();
        const hash = window.location.hash.slice(1);
        const params = new URLSearchParams(hash);
        const token = params.get('access_token');

        if (token) {
            window.history.replaceState({}, document.title, window.location.pathname);
            sessionStorage.setItem('no_vax_token', token);
            loadDiscordData(token);
        } else {
            const saved = sessionStorage.getItem('no_vax_token');
            if (saved) loadDiscordData(saved);
        }
    };

    async function loadDiscordData(token) {
        try {
            const res = await fetch('https://discord.com/api/users/@me', {
                headers: { authorization: `Bearer ${token}` }
            });
            if (!res.ok) throw new Error("Expired");
            const user = await res.json();
            window.currentUser = user;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('loginBtn').classList.add('hidden');
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('userName').innerText = user.username;
            document.getElementById('userAvatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
            
            // ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
            document.getElementById('apply-locked').classList.add('hidden');
            document.getElementById('realApplyForm').classList.remove('hidden');

            console.log("ğŸ›¡ï¸ Ø§Ù„Ø­Ù…Ø§ÙŠØ©: ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­.");
        } catch (e) {
            sessionStorage.removeItem('no_vax_token');
        }
    }

    async function buy(item) {
        if(!window.currentUser) return alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡!");
        alert(`ğŸ›’ Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡ ${item} Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©... Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ù„Ø¯ÙØ¹.`);
    }

    async function handleApply(e) {
        e.preventDefault();
        alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù†ØªØ¸Ø± Ø§Ù„Ø±Ø¯ ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.");
        e.target.reset();
    }
</script>
</body>
</html>
