<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoVaX RP | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #a246f0; --bg: #030305; --card-bg: rgba(15, 15, 20, 0.98); --danger: #ff4d4d; --success: #2ecc71; --discord: #5865F2; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0; overflow-x: hidden; }
        #bg-video { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2; filter: brightness(0.2) blur(4px); }
        header { background: rgba(0,0,0,0.9); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary); position: sticky; top: 0; z-index: 1000; }
        .nav-tabs { display: flex; justify-content: center; gap: 10px; background: rgba(10,10,10,0.8); padding: 10px; border-bottom: 1px solid rgba(162, 70, 240, 0.2); }
        .tab-btn { cursor: pointer; padding: 10px 20px; border-radius: 10px; font-weight: bold; transition: 0.3s; opacity: 0.6; color: white; border: 1px solid transparent; }
        .tab-btn.active { opacity: 1; background: rgba(162, 70, 240, 0.2); border-color: var(--primary); color: var(--primary); }
        .container { max-width: 1200px; margin: 30px auto; padding: 20px; }
        .page-content { display: none; }
        .page-content.active { display: block !important; animation: fadeIn 0.5s ease; }
        .card { background: var(--card-bg); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); text-align: center; margin-bottom: 20px; }
        .store-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-top: 25px; }
        .product-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(162, 70, 240, 0.2); border-radius: 20px; padding: 20px; transition: 0.4s; }
        .product-card:hover { transform: translateY(-10px); border-color: var(--primary); box-shadow: 0 10px 30px rgba(162, 70, 240, 0.2); }
        .product-img { width: 100%; height: 200px; object-fit: cover; border-radius: 15px; }
        .price-tag { font-size: 26px; font-weight: 900; color: var(--success); margin: 15px 0; }
        .btn { padding: 12px 20px; border-radius: 10px; cursor: pointer; font-weight: bold; border: none; font-family: 'Cairo'; color: white; display: block; width: 100%; margin-top: 10px; text-align: center; text-decoration: none; }
        .btn-primary { background: var(--primary); }
        .btn-success { background: var(--success); }
        .btn-danger { background: var(--danger); }
        input, textarea { width: 100%; padding: 15px; margin-top: 10px; background: rgba(255,255,255,0.05); border: 1px solid var(--primary); border-radius: 10px; color: white; font-family: 'Cairo'; box-sizing: border-box; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<video autoplay muted loop id="bg-video">
    <source src="https://assets.mixkit.co/videos/preview/mixkit-neon-lights-in-a-dark-hallway-4712-large.mp4" type="video/mp4">
</video>

<header>
    <div style="font-size: 28px; font-weight: 900; color: var(--primary);">NoVaX RP</div>
    <div id="auth-section">
        <button id="loginBtn" class="btn btn-primary" style="width:auto; margin:0;" onclick="login()">Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</button>
        <div id="userInfo" class="hidden" style="display:flex; align-items:center; gap:12px;">
            <span id="userName" style="font-weight:bold;"></span>
            <img id="userAvatar" src="" style="width:35px; border-radius:50%; border:2px solid var(--primary);">
            <button onclick="logout()" style="background:none; border:none; color:var(--danger); cursor:pointer; font-size:20px;"><i class="fas fa-power-off"></i></button>
        </div>
    </div>
</header>

<nav class="nav-tabs">
    <div class="tab-btn active" onclick="switchPage('home-page', this)">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="tab-btn" onclick="switchPage('store-page', this)">Ø§Ù„Ù…ØªØ¬Ø±</div>
    <div class="tab-btn" onclick="switchPage('apply-page', this)">Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</div>
    <div id="adminTab" class="tab-btn hidden" onclick="switchPage('admin-page', this)" style="color:var(--danger);">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
</nav>

<div class="container">
    <section id="home-page" class="page-content active">
        <div class="card">
            <h1>NoVaX RP</h1>
            <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©. Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ÙˆØ§Ø¨Ø¯Ø£ Ù‚ØµØªÙƒ!</p>
            <a href="https://discord.gg/HZFb5BZ8dZ" class="btn btn-primary" style="width:max-content; margin: 20px auto;">Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</a>
        </div>

        <div class="card" style="margin-top: 30px; border-top: 2px solid #53fc18; background: rgba(83, 252, 24, 0.02);">
            <h2 style="color:#53fc18; display:flex; align-items:center; justify-content:center; gap:10px; font-size: 22px;">
                <i class="fas fa-broadcast-tower"></i> Ø³ØªØ±ÙŠÙ…Ø±Ø² Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¹Ù„Ù‰ KICK
            </h2>
            <div id="kick-streams-home" class="streams-grid">
                </div>
        </div>
    </section>
</div>

    <section id="store-page" class="page-content">
        <div class="card">
            <h2 style="font-size:32px; color:var(--primary);">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</h2>
            <div class="store-grid">
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=500" class="product-img">
                    <h3>Ø­Ø²Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù€ VIP</h3>
                    <div class="price-tag">50 SAR</div>
                    <button class="btn btn-primary" onclick="buyItem('Ø­Ø²Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª VIP')">Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡</button>
                </div>
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=500" class="product-img">
                    <h3>Ù…Ù†Ø²Ù„ Ù…ÙˆØ¯Ø±Ù† ÙØ§Ø®Ø±</h3>
                    <div class="price-tag">100 SAR</div>
                    <button class="btn btn-primary" onclick="buyItem('Ù…Ù†Ø²Ù„ Ù…ÙˆØ¯Ø±Ù†')">Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡</button>
                </div>
            </div>
        </div>
    </section>

    <section id="apply-page" class="page-content">
        <div class="card">
            <div id="apply-form">
                <h2>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…)</h2>
                <input type="text" id="ans_name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ§Ù„Ø¹Ù…Ø±">
                <input type="text" id="ans_char_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©)">
                <textarea id="ans_vdm" rows="3" placeholder="Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ù…ØµØ·Ù„Ø­ (VDM)ØŸ ÙˆØ£Ø¹Ø·Ù Ù…Ø«Ø§Ù„Ø§Ù‹ Ø¹Ù„ÙŠÙ‡ØŸ"></textarea>
                <textarea id="ans_rdm" rows="3" placeholder="Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ù…ØµØ·Ù„Ø­ (RDM)ØŸ ÙˆÙ…Ø§ Ù‡ÙŠ Ø´Ø±ÙˆØ· Ø§Ù„Ù‚ØªÙ„ØŸ"></textarea>
                <textarea id="ans_failrp" rows="3" placeholder="Ø§Ø´Ø±Ø­ Ù…ØµØ·Ù„Ø­ (Fail RP) Ø¨Ø£Ø³Ù„ÙˆØ¨ÙƒØŸ"></textarea>
                <textarea id="ans_story" rows="3" placeholder="Ø§ÙƒØªØ¨ Ù†Ø¨Ø°Ø© Ø¹Ù† Ù‚ØµØ© Ø¯Ø®ÙˆÙ„ Ø´Ø®ØµÙŠØªÙƒ Ù„Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ"></textarea>
                <button class="btn btn-success" onclick="submitApp()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
            </div>
            <div id="already-applied" class="hidden text-center">
                <h2 style="color: #ffc107; margin-bottom: 15px;">âš ï¸ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</h2>
                <p id="applied-msg-text" style="color: #ffffff; font-size: 1.1em;"></p>
            </div>
            <div id="apply-closed" class="hidden text-center">
                <h2 style="color:var(--danger);">âŒ Ù†Ø¹ØªØ°Ø±ØŒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                <p>ØªØ§Ø¨Ø¹ Ù‚Ù†Ø§Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù„Ù…Ø¹Ø±ÙØ© Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¯Ù….</p>
            </div>
        </div>
    </section>

    <section id="admin-page" class="page-content">
        <div class="card">
            <h3>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
            <div style="display:flex; gap:10px;">
                <button class="btn btn-success" onclick="toggleApply(true)">ÙØªØ­ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
                <button class="btn btn-danger" onclick="toggleApply(false)">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
            </div>
            <p id="current-status" style="margin-top:20px; font-weight:bold; color:var(--primary);"></p>
        </div>
        <div class="card">
            <h3>ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ø³Ø±ÙŠØ¹</h3>
            <textarea id="ann_text" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†..."></textarea>
            <button class="btn btn-primary" onclick="sendAnn()">Ù†Ø´Ø± Ø§Ù„Ø¢Ù† @everyone</button>
        </div>
    </section>
</div>

<script>
    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¢ÙŠØ¯ÙŠÙ‡Ø§Øª
    const MY_ID = "1221794986203418704"; // Ø¢ÙŠØ¯ÙŠ ØµØ§Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    const ROLE_ADMIN_ID = "1443982445455343650"; // Ø¶Ø¹ Ø¢ÙŠØ¯ÙŠ Ø±ØªØ¨Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‡Ù†Ø§ (Ø£Ùˆ Ø§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ø¢ÙŠØ¯ÙŠ Ø±ØªØ¨Ø© Ù…ÙØ¹Ù„ Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„)
    const ROLE_MEMBER_ID = "1443982445455343650"; // Ø¢ÙŠØ¯ÙŠ Ø±ØªØ¨Ø© Ù…ÙØ¹Ù„
    const SERVER_ID = "1325063245471420498"; // Ø¢ÙŠØ¯ÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±

    const WEB_ADMIN = "https://discord.com/api/webhooks/1466229554908762307/u1EvYzI2ScPHlZetO_qpo_s6aRM6hMTn3e-VC_-S3982aHNRuzaz9-EsQruD1uNAP-w-?wait=true";
    const WEB_APPLY = "https://discord.com/api/webhooks/1466173783537750201/Dbm7MYHeWnFUHMhRoV0g-66Nfyni6kB3XXENjUL9aUEZWDGgjOjrGb0YtvOkOwOwwPaJ";
    const WEB_ANNOUNCEMENT = "https://discord.com/api/webhooks/1466228663962832959/HndTSLUdCtqJk7Sa8iRwDudzt-LmOi5i_x2MrL4yJ_2MTFjaPXM18XuM01z4sJp7MzsJ";
    
    let currentUser = null;

    window.login = () => {
        const url = "https://discord.com/oauth2/authorize?client_id=1444065204051906610&response_type=token&redirect_uri=https%3A%2F%2Fvirusz111.github.io%2FNoVaX%2F&scope=identify+guilds+guilds.members.read";
        window.location.href = url;
    };

    window.logout = () => {
        localStorage.clear(); 
        window.location.href = window.location.origin + window.location.pathname;
    };

    window.switchPage = function(id, btn) {
        document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
        checkApply();
    };

    function checkApply() {
        const isOpen = localStorage.getItem('noVaX_isOpen') !== 'false';
        const hasAppliedLocal = localStorage.getItem('noVaX_applied') === 'true';
        
        // ÙØ­Øµ Ù‡Ù„ Ù‡Ùˆ Ù…ÙØ¹Ù„ØŸ
        const isMember = currentUser && currentUser.roles && currentUser.roles.includes(ROLE_MEMBER_ID);
        // ÙØ­Øµ Ù‡Ù„ Ù‡Ùˆ Ø£Ø¯Ù…Ù†ØŸ (Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¢ÙŠØ¯ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ Ø£Ùˆ Ø±ØªØ¨Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©)
        const isAdmin = currentUser && (currentUser.id === MY_ID || (currentUser.roles && currentUser.roles.includes(ROLE_ADMIN_ID)));

        const form = document.getElementById('apply-form');
        const closedMsg = document.getElementById('apply-closed');
        const alreadyMsg = document.getElementById('already-applied');
        const msgText = document.getElementById('applied-msg-text');
        const adminTab = document.getElementById('adminTab');

        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
        if(adminTab) {
            isAdmin ? adminTab.classList.remove('hidden') : adminTab.classList.add('hidden');
        }

        if(form) form.classList.add('hidden');
        if(closedMsg) closedMsg.classList.add('hidden');
        if(alreadyMsg) alreadyMsg.classList.add('hidden');

        if (isAdmin) {
            msgText.innerText = "Ø£Ù†Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©ØŒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…ØªØ§Ø­ Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙ‚Ø·.";
            alreadyMsg.classList.remove('hidden');
        } else if (isMember) {
            msgText.innerText = "Ø£Ù†Øª Ø¹Ø¶Ùˆ Ù…ÙØ¹Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© âœ…";
            alreadyMsg.classList.remove('hidden');
        } else if (hasAppliedLocal) {
            msgText.innerText = "Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù†ØªØ¸Ø§Ø± Ø±Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© â³";
            alreadyMsg.classList.remove('hidden');
        } else if (!isOpen) {
            closedMsg.classList.remove('hidden');
        } else {
            form.classList.remove('hidden');
        }

        const statusText = document.getElementById('current-status');
        if(statusText) statusText.innerText = "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: " + (isOpen ? "Ù…ÙØªÙˆØ­ âœ…" : "Ù…ØºÙ„Ù‚ âŒ");
    }

    window.submitApp = async function() {
        if(!currentUser) return alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¨Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø£ÙˆÙ„Ø§Ù‹!");

        const hasAppliedLocal = localStorage.getItem('noVaX_applied') === 'true';
        const isMember = currentUser.roles && currentUser.roles.includes(ROLE_MEMBER_ID);
        const isAdmin = currentUser.id === MY_ID || (currentUser.roles && currentUser.roles.includes(ROLE_ADMIN_ID));

        if (isMember || hasAppliedLocal || isAdmin) {
            return alert("âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ù†Ø¸Ø§Ù… NoVaX Ø±ØµØ¯ Ø£Ù†Ùƒ ØªÙ…ØªÙ„Ùƒ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ Ù‚Ø¯Ù…Øª Ø·Ù„Ø¨Ø§Ù‹ Ù…Ø³Ø¨Ù‚Ø§Ù‹!");
        }

        const data = {
            name: document.getElementById('ans_name').value,
            char: document.getElementById('ans_char_name').value,
            vdm: document.getElementById('ans_vdm').value,
            rdm: document.getElementById('ans_rdm').value,
            fail: document.getElementById('ans_failrp').value,
            story: document.getElementById('ans_story').value
        };

        if (Object.values(data).some(v => !v)) return alert("Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹!");

        try {
            await fetch(WEB_APPLY, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    embeds: [{
                        title: "ğŸ“‚ Ø·Ù„Ø¨ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",
                        color: 3447003,
                        fields: [
                            { name: "ğŸ‘¤ Ø§Ù„Ø¹Ø¶Ùˆ", value: `<@${currentUser.id}>` },
                            { name: "ğŸ“ Ø§Ù„Ø§Ø³Ù…", value: data.name },
                            { name: "ğŸ® Ø§Ù„Ø´Ø®ØµÙŠØ©", value: data.char },
                            { name: "VDM", value: data.vdm },
                            { name: "RDM", value: data.rdm },
                            { name: "FailRP", value: data.fail },
                            { name: "Story", value: data.story }
                        ],
                        footer: { text: "NoVaX System" },
                        timestamp: new Date()
                    }]
                })
            });
            localStorage.setItem('noVaX_applied', 'true');
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸš€");
            checkApply();
        } catch (e) { alert("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„."); }
    };

        window.toggleApply = async function(val) {
        localStorage.setItem('noVaX_isOpen', val);
        
        // Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¹Ø´Ø§Ù† Ø§Ù„Ù‚Ù†Ø§Ø© ØªØ¸Ù„ Ù†Ø¸ÙŠÙØ©
        const oldId = localStorage.getItem('last_status_msg_id');
        if (oldId) {
            try { await fetch(WEB_ADMIN.split('?')[0] + "/messages/" + oldId, { method: 'DELETE' }); } catch(e){}
        }

        const res = await fetch(WEB_ADMIN, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                content: "||@everyone - @here|| ğŸ“¢", 
                embeds: [{
                    title: val ? "âœ¨ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ø¢Ù† âœ¨" : "ğŸ”’ Ù†Ø£Ø³ÙØŒ ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…",
                    description: val ? 
                        "Ø§Ø³ØªØ¹Ø¯ÙˆØ§ ÙŠØ§ Ø£Ø¨Ø·Ø§Ù„! Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†ÙƒÙ… ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨Ø§ØªÙƒÙ… ÙˆØ§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø¹Ø§Ù„Ù… **NoVaX**. Ù„Ø§ ØªÙÙˆØª Ø§Ù„ÙØ±ØµØ©!" : 
                        "Ø§Ù†ØªÙ‡Øª ÙØªØ±Ø© Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹. ØªØ§Ø¨Ø¹ÙˆÙ†Ø§ Ù„Ù…Ø¹Ø±ÙØ© Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¯Ù….",
                    color: val ? 3066993 : 15158332,
                    fields: [
                        { name: "ğŸ‘¨ğŸ¼â€ğŸ’» Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«", value: `<@${currentUser.id}>`, inline: true },
                        { name: "â° Ø§Ù„ÙˆÙ‚Øª", value: new Date().toLocaleTimeString('ar-EG'), inline: true },
                        { name: "ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹", value: "[Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø¯Ø®ÙˆÙ„](https://virusz111.github.io/NoVaX/)", inline: false }
                    ],
                    // Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø§Ù„Ù„ÙŠ ØªØ¹Ø·ÙŠ Ø´ÙƒÙ„ "Ø­Ù„Ùˆ Ø¬Ø¯Ø§Ù‹"
                    image: { url: val ? "https://cdn.discordapp.com/attachments/1441771311528546485/1466535322983858269/T401767990514429.png?ex=697d18f3&is=697bc773&hm=62e1e120860c1a41d290a1efbf28dee2901d4aa1904990ffb6d30578cf0cbf7c&" : "https://cdn.discordapp.com/attachments/1441771311528546485/1466535322983858269/T401767990514429.png?ex=697d18f3&is=697bc773&hm=62e1e120860c1a41d290a1efbf28dee2901d4aa1904990ffb6d30578cf0cbf7c&" }, 
                    thumbnail: { url: `https://cdn.discordapp.com/attachments/1441771213545279528/1466534621444444210/T401766427699634.png?ex=697d184c&is=697bc6cc&hm=7900a84479bd77144a7c38bd0732102e3fd73136cbb2caed5f27ec608b4c80c8&${currentUser.id}/${currentUser.avatar}.png` },
                    footer: { text: "NoVaX Management System â€¢ Status", icon_url: "https://cdn.discordapp.com/attachments/1441771213545279528/1466534621444444210/T401766427699634.png?ex=697d184c&is=697bc6cc&hm=7900a84479bd77144a7c38bd0732102e3fd73136cbb2caed5f27ec608b4c80c8&" }
                }]
            })
        });

        const json = await res.json();
        if(json.id) localStorage.setItem('last_status_msg_id', json.id);
        
        checkApply();
        alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸš€");
    };

    const streamersList = [
    { username: "zxM_1", label: "ZXM" },
    { username: "streamer2", label: "Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ" },
    { username: "streamer3", label: "Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø± Ø§Ù„Ø«Ø§Ù„Ø«" }
];

function displayHomeStreams() {
    const container = document.getElementById('kick-streams-home');
    if(!container) return;
    container.innerHTML = ""; 

    streamersList.forEach(s => {
        const card = document.createElement('div');
        card.className = 'stream-card';
        // ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙØ®Ù…Ø© Ø¨Ù„ÙˆÙ† ÙƒÙŠÙƒ Ø§Ù„Ø£Ø®Ø¶Ø±
        const fallbackImg = `https://ui-avatars.com/api/?name=${s.username}&background=53fc18&color=000&bold=true`;
        
        card.innerHTML = `
            <div class="live-badge"><span class="dot"></span> KICK</div>
            <img src="${fallbackImg}" id="home-img-${s.username}" style="width:60px; height:60px; border-radius:50%; border:2px solid #53fc18;">
            <h3 style="margin:10px 0 5px 0; font-size:16px; color:white;">${s.label}</h3>
            <a href="https://kick.com/${s.username}" target="_blank" class="btn-kick" style="background:#53fc18; color:black; text-decoration:none; padding:5px 10px; border-radius:8px; display:block; font-size:12px; font-weight:bold;">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¢Ù†</a>
        `;
        container.appendChild(card);
    });
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('load', displayHomeStreams);
    
    
    window.sendAnn = async function() {
        const msg = document.getElementById('ann_text').value;
        if(!msg) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø£ÙˆÙ„Ø§Ù‹!");
        await fetch(WEB_ANNOUNCEMENT, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ content: "||@everyone - @here||", embeds: [{ title: "ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù†", description: msg, color: 10634992 }] })
        });
        alert("ØªÙ… Ø§Ù„Ù†Ø´Ø±!");
        document.getElementById('ann_text').value = "";
    };

    window.buyItem = async function(item) {
        if(!currentUser) return alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ!");
        await fetch(WEB_ADMIN, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ content: `ğŸ›’ **Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡**\nØ§Ù„Ø¹Ø¶Ùˆ: <@${currentUser.id}>\nØ§Ù„Ù…Ù†ØªØ¬: ${item}` })
        });
        alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ!");
    };

    window.onload = () => {
        const params = new URLSearchParams(window.location.hash.slice(1));
        const token = params.get('access_token');
        if (token) {
            fetch('https://discord.com/api/users/@me', { headers: { authorization: `Bearer ${token}` } })
            .then(r => r.json()).then(user => {
                currentUser = user;
                document.getElementById('loginBtn').classList.add('hidden');
                const info = document.getElementById('userInfo');
                info.classList.remove('hidden');
                document.getElementById('userName').innerText = user.username;
                document.getElementById('userAvatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
                
                // Ø¬Ù„Ø¨ Ø§Ù„Ø±ØªØ¨ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
                fetch(`https://discord.com/api/users/@me/guilds/${SERVER_ID}/member`, { headers: { authorization: `Bearer ${token}` } })
                .then(res => res.json()).then(m => {
                    if(m.roles) currentUser.roles = m.roles;
                    checkApply();
                }).catch(() => checkApply());

            }).catch(() => checkApply());
        } else { checkApply(); }
    };
</script>
</body>
</html>
