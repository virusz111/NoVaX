<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoVaX RP | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #a246f0; --bg: #030305; --card-bg: rgba(15, 15, 20, 0.98); --danger: #ff4d4d; --success: #2ecc71; --discord: #5865F2; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0; overflow-x: hidden; }
        #bg-video { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: -2; filter: brightness(0.2) blur(4px); }
        header { background: rgba(0,0,0,0.9); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary); position: sticky; top: 0; z-index: 1000; }
        .nav-tabs { display: flex; justify-content: center; gap: 10px; background: rgba(10,10,10,0.8); padding: 10px; border-bottom: 1px solid rgba(162, 70, 240, 0.2); }
        .tab-btn { cursor: pointer; padding: 10px 20px; border-radius: 10px; font-weight: bold; transition: 0.3s; opacity: 0.6; color: white; border: 1px solid transparent; }
        .tab-btn.active { opacity: 1; background: rgba(162, 70, 240, 0.2); border-color: var(--primary); color: var(--primary); }
        .container { max-width: 1200px; margin: 30px auto; padding: 20px; }
        .page-content { display: none; } /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
        .page-content.active { display: block !important; animation: fadeIn 0.5s ease; }
        .card { background: var(--card-bg); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); text-align: center; margin-bottom: 20px; }
        
        /* Ø§Ù„Ù…ØªØ¬Ø± */
        .store-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-top: 25px; }
        .product-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(162, 70, 240, 0.2); border-radius: 20px; padding: 20px; transition: 0.4s; }
        .product-card:hover { transform: translateY(-10px); border-color: var(--primary); box-shadow: 0 10px 30px rgba(162, 70, 240, 0.2); }
        .product-img { width: 100%; height: 200px; object-fit: cover; border-radius: 15px; }
        .price-tag { font-size: 26px; font-weight: 900; color: var(--success); margin: 15px 0; }
        
        .btn { padding: 12px 20px; border-radius: 10px; cursor: pointer; font-weight: bold; border: none; font-family: 'Cairo'; color: white; display: block; width: 100%; margin-top: 10px; text-align: center; text-decoration: none; }
        .btn-primary { background: var(--primary); }
        .btn-success { background: var(--success); }
        .btn-danger { background: var(--danger); }
        input, textarea { width: 100%; padding: 15px; margin-top: 10px; background: rgba(255,255,255,0.05); border: 1px solid var(--primary); border-radius: 10px; color: white; font-family: 'Cairo'; box-sizing: border-box; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<video autoplay muted loop id="bg-video">
    <source src="https://assets.mixkit.co/videos/preview/mixkit-neon-lights-in-a-dark-hallway-4712-large.mp4" type="video/mp4">
</video>

<header>
    <div style="font-size: 28px; font-weight: 900; color: var(--primary);">NoVaX RP</div>
    <div id="auth-section">
        <button id="loginBtn" class="btn btn-primary" style="width:auto; margin:0;" onclick="login()">Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</button>
        <div id="userInfo" class="hidden" style="display:flex; align-items:center; gap:12px;">
            <span id="userName" style="font-weight:bold;"></span>
            <img id="userAvatar" src="" style="width:35px; border-radius:50%; border:2px solid var(--primary);">
            <button onclick="logout()" style="background:none; border:none; color:var(--danger); cursor:pointer; font-size:20px;"><i class="fas fa-power-off"></i></button>
        </div>
    </div>
</header>

<nav class="nav-tabs">
    <div class="tab-btn active" onclick="switchPage('home-page', this)">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="tab-btn" onclick="switchPage('store-page', this)">Ø§Ù„Ù…ØªØ¬Ø±</div>
    <div class="tab-btn" onclick="switchPage('apply-page', this)">Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</div>
    <div id="adminTab" class="tab-btn hidden" onclick="switchPage('admin-page', this)" style="color:var(--danger);">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</div>
</nav>

<div class="container">
    <section id="home-page" class="page-content active">
        <div class="card">
            <h1>NoVaX RP</h1>
            <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©. Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ÙˆØ§Ø¨Ø¯Ø£ Ù‚ØµØªÙƒ!</p>
            <a href="https://discord.gg/HZFb5BZ8dZ" class="btn btn-primary" style="width:max-content; margin: 20px auto;">Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</a>
        </div>
    </section>

    <section id="store-page" class="page-content">
        <div class="card">
            <h2 style="font-size:32px; color:var(--primary);">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</h2>
            <div class="store-grid">
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=500" class="product-img">
                    <h3>Ø­Ø²Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù€ VIP</h3>
                    <div class="price-tag">50 SAR</div>
                    <button class="btn btn-primary" onclick="buyItem('Ø­Ø²Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª VIP')">Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡</button>
                </div>
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=500" class="product-img">
                    <h3>Ù…Ù†Ø²Ù„ Ù…ÙˆØ¯Ø±Ù† ÙØ§Ø®Ø±</h3>
                    <div class="price-tag">100 SAR</div>
                    <button class="btn btn-primary" onclick="buyItem('Ù…Ù†Ø²Ù„ Ù…ÙˆØ¯Ø±Ù†')">Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡</button>
                </div>
            </div>
        </div>
    </section>

    <section id="apply-page" class="page-content">
        <div class="card">
            <div id="apply-form">
                <h2>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…)</h2>
                
                <input type="text" id="ans_name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ§Ù„Ø¹Ù…Ø±">
                <input type="text" id="ans_char_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©)">

                <textarea id="ans_vdm" rows="3" placeholder="Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ù…ØµØ·Ù„Ø­ (VDM)ØŸ ÙˆØ£Ø¹Ø·Ù Ù…Ø«Ø§Ù„Ø§Ù‹ Ø¹Ù„ÙŠÙ‡ØŸ"></textarea>
                
                <textarea id="ans_rdm" rows="3" placeholder="Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ù…ØµØ·Ù„Ø­ (RDM)ØŸ ÙˆÙ…Ø§ Ù‡ÙŠ Ø´Ø±ÙˆØ· Ø§Ù„Ù‚ØªÙ„ØŸ"></textarea>
                
                <textarea id="ans_failrp" rows="3" placeholder="Ø§Ø´Ø±Ø­ Ù…ØµØ·Ù„Ø­ (Fail RP) Ø¨Ø£Ø³Ù„ÙˆØ¨ÙƒØŸ"></textarea>
                
                <textarea id="ans_story" rows="3" placeholder="Ø§ÙƒØªØ¨ Ù†Ø¨Ø°Ø© Ø¹Ù† Ù‚ØµØ© Ø¯Ø®ÙˆÙ„ Ø´Ø®ØµÙŠØªÙƒ Ù„Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ"></textarea>

                <button class="btn btn-success" onclick="submitApp()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
            </div>
            
            <div id="apply-closed" class="hidden">
                <h2 style="color:var(--danger);">âŒ Ù†Ø¹ØªØ°Ø±ØŒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                <p>ØªØ§Ø¨Ø¹ Ù‚Ù†Ø§Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù„Ù…Ø¹Ø±ÙØ© Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¯Ù….</p>
            </div>
        </div>
    </section>

    <section id="admin-page" class="page-content">
        <div class="card">
            <h3>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
            <div style="display:flex; gap:10px;">
                <button class="btn btn-success" onclick="toggleApply(true)">ÙØªØ­ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
                <button class="btn btn-danger" onclick="toggleApply(false)">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
            </div>
            <p id="current-status" style="margin-top:20px; font-weight:bold; color:var(--primary);"></p>
        </div>
        <div class="card">
            <h3>ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ø³Ø±ÙŠØ¹</h3>
            <textarea id="ann_text" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†..."></textarea>
            <button class="btn btn-primary" onclick="sendAnn()">Ù†Ø´Ø± Ø§Ù„Ø¢Ù† @everyone</button>
        </div>
    </section>
</div>

<script>
    const MY_ID = "1221794986203418704";
    const WEB_ADMIN = "https://discord.com/api/webhooks/1466229554908762307/u1EvYzI2ScPHlZetO_qpo_s6aRM6hMTn3e-VC_-S3982aHNRuzaz9-EsQruD1uNAP-w-?wait=true";
    const WEB_APPLY = "https://discord.com/api/webhooks/1466173783537750201/Dbm7MYHeWnFUHMhRoV0g-66Nfyni6kB3XXENjUL9aUEZWDGgjOjrGb0YtvOkOwOwwPaJ";
    const WEB_ANNOUNCEMENT = "https://discord.com/api/webhooks/1466228663962832959/HndTSLUdCtqJk7Sa8iRwDudzt-LmOi5i_x2MrL4yJ_2MTFjaPXM18XuM01z4sJp7MzsJ";
    
    window.switchPage = function(id, btn) {
        document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
        checkApply();
    }

    window.buyItem = async function(item) {
        if(!currentUser) return alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ!");
        await fetch(WEB_ADMIN, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ content: `ğŸ›’ **Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡**\nØ§Ù„Ø¹Ø¶Ùˆ: <@${currentUser.id}>\nØ§Ù„Ù…Ù†ØªØ¬: ${item}` })
        });
        alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©!");
    }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹ Ø¥Ø±Ø³Ø§Ù„ Embed Ø§Ø­ØªØ±Ø§ÙÙŠØ©
window.toggleApply = async function(val) {
    localStorage.setItem('noVaX_isOpen', val);

    // --- 1. Ù…Ø­Ø§ÙˆÙ„Ø© Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø®Ø²Ù†Ø© ---
    const oldMsgId = localStorage.getItem('last_status_msg_id');
    if (oldMsgId) {
        try {
            // Ù†Ø­Ø°Ù ?wait=true Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø°Ù Ù„Ø£Ù†Ù‡ ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ Ø§Ù„Ù€ DELETE
            const deleteUrl = WEB_ADMIN.split('?')[0] + "/messages/" + oldMsgId;
            await fetch(deleteUrl, { method: 'DELETE' });
        } catch (e) {
            console.log("Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ø­Ø°ÙˆÙØ© Ø¨Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.");
        }
    }

    // --- 2. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ Embed Ø§Ù„Ù…Ù†Ø³Ù‚ ---
    const embedPayload = {
        embeds: [{
            title: val ? "âœ… ØªÙ… ÙØªØ­ Ø¨Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…" : "âŒ ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…",
            description: val 
                ? "||@everyone - @here||\nÙŠØ³Ø± Ø¥Ø¯Ø§Ø±Ø© **NoVaX** Ø¥Ø¹Ù„Ø§Ù† ÙØªØ­ Ø¨Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ¹ÙŠÙ„! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨Ùƒ." 
                : "||@everyone - @here||\nØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø­Ø§Ù„ÙŠØ§Ù‹ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.",
            color: val ? 3066993 : 15158332,
            fields: [
                { name: "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¢Ù†", value: val ? "Ù…ÙØªÙˆØ­ (Open)" : "Ù…ØºÙ„Ù‚ (Closed)", inline: true },
                { name: "Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„", value: `<@${currentUser.id}>`, inline: true }
            ],
            footer: { text: "NoVaX Systems" },
            timestamp: new Date()
        }]
    };

    // --- 3. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù€ Embed Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙˆØ­ÙØ¸ Ø§Ù„Ù€ ID ---
    try {
        const response = await fetch(WEB_ADMIN, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(embedPayload)
        });

        const result = await response.json();
        if (result.id) {
            // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù€ ID Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
            localStorage.setItem('last_status_msg_id', result.id);
        }

        checkApply();
        alert(val ? "ØªÙ… ÙØªØ­ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙˆØ­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚!" : "ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙˆØ­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚!");
    } catch (error) {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:", error);
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.");
    }
}

function checkApply() {
    const isOpen = localStorage.getItem('noVaX_isOpen') !== 'false';
    document.getElementById('apply-form').classList.toggle('hidden', !isOpen);
    document.getElementById('apply-closed').classList.toggle('hidden', isOpen);
    if(document.getElementById('current-status'))
        document.getElementById('current-status').innerText = "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: " + (isOpen ? "Ù…ÙØªÙˆØ­ âœ…" : "Ù…ØºÙ„Ù‚ âŒ");
}

window.submitApp = async function() {
    // Ø³Ø­Ø¨ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    const data_inputs = {
        name: document.getElementById('ans_name').value,
        char: document.getElementById('ans_char_name').value,
        vdm: document.getElementById('ans_vdm').value,
        rdm: document.getElementById('ans_rdm').value,
        fail: document.getElementById('ans_failrp').value,
        story: document.getElementById('ans_story').value
    };

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Ø§Ù„Ø±Ø¨Ø¹ Ø³Ø§Ø¹Ø©)
    const cooldown = 15 * 60 * 1000;
    const last = localStorage.getItem('last_submit_time');
    if (last && (Date.now() - last < cooldown)) {
        return alert("Ù‡Ø¯Ù‘ Ø§Ù„Ù„Ø¹Ø¨! Ø¨Ø§Ù‚ÙŠ Ù„Ùƒ ÙˆÙ‚Øª Ù‚Ø¨Ù„ Ù…Ø§ ØªÙ‚Ø¯Ø± ØªÙ‚Ø¯Ù… Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©.");
    }

    // Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† ÙƒÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ù…Ù„ÙŠØ§Ù†Ø©
    if (Object.values(data_inputs).some(val => !val)) {
        return alert(" Ù„Ø§Ø²Ù… ØªØ¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¹Ø´Ø§Ù† ØªÙ†Ù‚Ø¨Ù„!");
    }

    const embedData = {
        embeds: [{
            title: "ğŸ“‚ Ø·Ù„Ø¨ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ | NoVaX",
            color: 0x3498db, // Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù‡Ø§Ø¯Ø¦ Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…Ø§Øª
            fields: [
                { name: "ğŸ‘¤ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", value: `**Ø§Ù„Ø§Ø³Ù…:** ${data_inputs.name}\n**Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ©:** ${data_inputs.char}`, inline: false },
                { name: "ğŸš« Ù‚Ø§Ù†ÙˆÙ† VDM", value: data_inputs.vdm },
                { name: "ğŸ”« Ù‚Ø§Ù†ÙˆÙ† RDM", value: data_inputs.rdm },
                { name: "ğŸ­ Ù‚Ø§Ù†ÙˆÙ† Fail RP", value: data_inputs.fail },
                { name: "ğŸ“– Ù‚ØµØ© Ø§Ù„Ø´Ø®ØµÙŠØ©", value: data_inputs.story },
                { name: "ğŸ†” ØµØ§Ø­Ø¨ Ø§Ù„Ø·Ù„Ø¨", value: `<@${currentUser.id}>` }
            ],
            footer: { text: "NoVaX Recruitment Team" },
            timestamp: new Date()
        }]
    };

    await fetch(WEB_APPLY, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(embedData)
    });

    localStorage.setItem('last_submit_time', Date.now());
    alert("! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©.");
    
    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø®Ø§Ù†Ø§Øª
    Object.keys(data_inputs).forEach(id => {
        const el = document.getElementById('ans_' + id);
        if(el) el.value = "";
    });
}

Window.sendAnn = async function() {
    const msg = document.getElementById('ann_text').value;
    if(!msg) return alert("ÙŠØ§ Ø¨Ø·Ù„ØŒ Ø§Ù„Ø®Ø§Ù†Ø© ÙØ§Ø¶ÙŠØ©! Ø§ÙƒØªØ¨ Ø´ÙŠ Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡.");

    const annEmbed = {
        content: "@everyone", 
        embeds: [{
            title: "ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ø¥Ø¯Ø§Ø±ÙŠ Ø¬Ø¯ÙŠØ¯",
            description: msg,
            color: 0xa246f0, 
            fields: [
                // Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ MY_ID Ø§Ù„Ù„ÙŠ Ø¹Ø±ÙÙ†Ø§Ù‡ ÙÙˆÙ‚ ÙƒØ§Ø­ØªÙŠØ§Ø·
                { name: "Ø¨ÙˆØ§Ø³Ø·Ø©:", value: `<@${MY_ID}>`, inline: true }
            ],
            footer: { text: "NoVaX System" },
            timestamp: new Date()
        }]
    };

    // Ø§Ù„ØªØºÙŠÙŠØ± Ù‡Ù†Ø§: Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯
    await fetch(WEB_ANNOUNCEMENT, { 
        method: 'POST', 
        headers: {'Content-Type': 'application/json'}, 
        body: JSON.stringify(annEmbed) 
    });

    alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ÙØ®Ù… Ø¨Ù†Ø¬Ø§Ø­! ğŸš€");
    document.getElementById('ann_text').value = ""; 
}

    const CLIENT_ID = "1444065204051906610";
    const REDIRECT = encodeURIComponent(window.location.origin + window.location.pathname);
    let currentUser = null;

    window.login = () => window.location.href = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT}&response_type=token&scope=identify`;
    window.logout = () => window.location.href = window.location.origin + window.location.pathname;

    window.onload = () => {
        checkApply();
        const params = new URLSearchParams(window.location.hash.slice(1));
        const token = params.get('access_token');
        if (token) {
            fetch('https://discord.com/api/users/@me', { headers: { authorization: `Bearer ${token}` } })
            .then(r => r.json()).then(user => {
                currentUser = user;
                document.getElementById('loginBtn').classList.add('hidden');
                document.getElementById('userInfo').classList.remove('hidden');
                document.getElementById('userName').innerText = user.username;
                document.getElementById('userAvatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
                if(user.id === MY_ID) document.getElementById('adminTab').classList.remove('hidden');
            });
        }
    };
</script>
</body>
</html>
