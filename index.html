<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoVaX RP | Grand Website</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… - CSS */
        :root {
            --primary-color: #a246f0;
            --secondary-color: #6a1b9a;
            --background-dark: #030305;
            --card-bg: rgba(20, 20, 25, 0.98);
            --text-white: #ffffff;
            --danger: #ff4d4d;
            --success: #2ecc71;
            --discord-blue: #5865F2;
        }

        * { box-sizing: border-box; transition: all 0.3s ease; }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-white);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        #bg-video {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover;
            z-index: -2;
            filter: brightness(0.2) blur(3px);
        }

        .overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 20%, var(--background-dark) 100%);
            z-index: -1;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header {
            background: rgba(0, 0, 0, 0.85);
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--primary-color);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo { font-size: 32px; font-weight: 800; color: var(--primary-color); text-transform: uppercase; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        nav.main-nav {
            display: flex;
            justify-content: center;
            background: rgba(15, 15, 15, 0.9);
            padding: 10px 0;
            gap: 15px;
        }

        .nav-item {
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 600;
            border: 1px solid transparent;
        }

        .nav-item:hover { background: rgba(162, 70, 240, 0.1); border-color: var(--primary-color); }
        .nav-item.active { background: var(--primary-color); color: white; box-shadow: 0 0 15px var(--primary-color); }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .main-container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        
        .section-box {
            display: none;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: slideUp 0.6s ease-out forwards;
        }

        .section-box.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ÙÙˆØ±Ù… */
        .btn-action {
            display: inline-block;
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            border-radius: 12px;
            border: none;
            font-family: 'Cairo';
            font-weight: 700;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
        }

        .btn-save { background: var(--success); color: white; }
        .btn-delete { background: var(--danger); color: white; }
        .btn-discord { background: var(--discord-blue); color: white; width: auto; }

        input, textarea {
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            color: white;
            font-family: 'Cairo';
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 14px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <video autoplay muted loop id="bg-video">
        <source src="https://assets.mixkit.co/videos/preview/mixkit-neon-lights-in-a-dark-hallway-4712-large.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>

    <header>
        <div class="logo">NoVaX RP</div>
        <div id="discord-auth">
            <button id="loginBtn" class="btn-action btn-discord" onclick="discordLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            <div id="userInfo" class="hidden" style="display:flex; align-items:center; gap:10px;">
                <img id="avatar" src="" style="width:40px; border-radius:50%;">
                <span id="username"></span>
            </div>
        </div>
    </header>

    <nav class="main-nav">
        <div class="nav-item active" onclick="changePage('home', this)">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div class="nav-item" onclick="changePage('apply', this)">Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</div>
        <div id="adminTab" class="nav-item hidden" onclick="changePage('admin', this)" style="color:var(--danger)">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
    </nav>

    <div class="main-container">
        <section id="home" class="section-box active">
            <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø¯ÙŠÙ†Ø© NoVaX</h1>
            <p>Ø£ÙØ¶Ù„ Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… Ù…ØªØ·ÙˆØ± ÙˆØ§Ø¯Ø§Ø±Ø© Ù…Ø­ØªØ±ÙØ©.</p>
        </section>

        <section id="apply" class="section-box">
            <div id="apply-status-container">
                <div id="form-body">
                    <h2>ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ ØªÙØ¹ÙŠÙ„</h2>
                    <input type="text" id="app_name" placeholder="Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¹Ù…Ø±">
                    <textarea id="app_reason" rows="5" placeholder="Ù„Ù…Ø§Ø°Ø§ Ø§Ø®ØªØ±Øª Ø³ÙŠØ±ÙØ±Ù†Ø§ØŸ"></textarea>
                    <button class="btn-action btn-save" onclick="submitApplication()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
                </div>
                <div id="closed-body" style="display:none;">
                    <h2 style="color:var(--danger)">Ù†Ø¹ØªØ°Ø±ØŒ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…ØºÙ„Ù‚ Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                    <p>ÙŠØ±Ø¬Ù‰ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù„Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.</p>
                </div>
            </div>
        </section>

        <section id="admin" class="section-box">
            <h2>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±</h2>
            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
                <h3>Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</h3>
                <div id="current-state" class="status-badge" style="background:var(--success)">Ø§Ù„Ø­Ø§Ù„Ø©: Ù…ÙØªÙˆØ­</div>
                <div style="display:flex; gap:10px;">
                    <button class="btn-action btn-save" onclick="updateSystemStatus(true)">ÙØªØ­ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
                    <button class="btn-action btn-delete" onclick="updateSystemStatus(false)">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
                </div>
            </div>

            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-top: 20px;">
                <h3>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù† Ø¹Ø§Ù… (@everyone)</h3>
                <textarea id="ann_text" placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§..."></textarea>
                <button class="btn-action btn-discord" style="width:100%" onclick="postGlobalAnnouncement()">Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
            </div>
        </section>
    </div>

    <script>
        // Ø«ÙˆØ§Ø¨Øª Ø§Ù„Ø±Ø¨Ø·
        const ADMIN_ID = "1221794986203418704";
        const WEBHOOK_APPLICATIONS = "https://discord.com/api/webhooks/1466173783537750201/Dbm7MYHeWnFUHMhRoV0g-66Nfyni6kB3XXENjUL9aUEZWDGgjOjrGb0YtvOkOwOwwPaJ";
        const WEBHOOK_NOTIFICATIONS = "https://discord.com/api/webhooks/1466228663962832959/HndTSLUdCtqJk7Sa8iRwDudzt-LmOi5i_x2MrL4yJ_2MTFjaPXM18XuM01z4sJp7MzsJ";

        // ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ù„Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
        window.updateSystemStatus = async function(isOpen) {
            localStorage.setItem('noVaX_apply_open', isOpen);
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ (Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ù…ÙÙ‚ÙˆØ¯)
            const payload = {
                username: "Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© NoVaX",
                embeds: [{
                    title: isOpen ? "âœ… ØªØ­Ø¯ÙŠØ«: ÙØªØ­ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…" : "âŒ ØªØ­Ø¯ÙŠØ«: Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…",
                    description: isOpen ? "@everyone Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù† ÙŠØ³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙØ¹ÙŠÙ„!" : "@everyone ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.",
                    color: isOpen ? 3066993 : 15158332,
                    timestamp: new Date()
                }]
            };

            await fetch(WEBHOOK_NOTIFICATIONS, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(payload)
            });

            alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­!");
            syncUI();
        }

        // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ø¹ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function syncUI() {
            const isOpen = localStorage.getItem('noVaX_apply_open') !== 'false';
            document.getElementById('form-body').style.display = isOpen ? 'block' : 'none';
            document.getElementById('closed-body').style.display = isOpen ? 'none' : 'block';
            
            const badge = document.getElementById('current-state');
            if(badge) {
                badge.innerText = isOpen ? "Ø§Ù„Ø­Ø§Ù„Ø©: Ù…ÙØªÙˆØ­ âœ…" : "Ø§Ù„Ø­Ø§Ù„Ø©: Ù…ØºÙ„Ù‚ âŒ";
                badge.style.background = isOpen ? "var(--success)" : "var(--danger)";
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
        window.submitApplication = async function() {
            const name = document.getElementById('app_name').value;
            const reason = document.getElementById('app_reason').value;

            if(!name || !reason) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");

            const data = {
                embeds: [{
                    title: "ğŸ“© ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",
                    fields: [
                        { name: "ØµØ§Ø­Ø¨ Ø§Ù„Ø·Ù„Ø¨", value: `<@${userObject?.id || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}>` },
                        { name: "Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¹Ù…Ø±", value: name },
                        { name: "Ø§Ù„Ø³Ø¨Ø¨", value: reason }
                    ],
                    color: 10635000
                }]
            };

            await fetch(WEBHOOK_APPLICATIONS, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });

            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø¯ÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­!");
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù†
        window.postGlobalAnnouncement = async function() {
            const text = document.getElementById('ann_text').value;
            if(!text) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø£ÙˆÙ„Ø§Ù‹!");

            await fetch(WEBHOOK_NOTIFICATIONS, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ content: "@everyone\n" + text })
            });

            alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­!");
            document.getElementById('ann_text').value = "";
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª
        window.changePage = function(id, el) {
            document.querySelectorAll('.section-box').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
            syncUI();
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„
        let userObject = null;
        function discordLogin() {
            const CLIENT_ID = "1444065204051906610";
            const REDIRECT = encodeURIComponent(window.location.origin + window.location.pathname);
            window.location.href = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT}&response_type=token&scope=identify`;
        }

        window.onload = () => {
            syncUI();
            const fragment = new URLSearchParams(window.location.hash.slice(1));
            const token = fragment.get('access_token');
            if (token) {
                fetch('https://discord.com/api/users/@me', { headers: { authorization: `Bearer ${token}` } })
                .then(r => r.json()).then(user => {
                    userObject = user;
                    document.getElementById('loginBtn').style.display = 'none';
                    document.getElementById('userInfo').classList.remove('hidden');
                    document.getElementById('username').innerText = user.username;
                    document.getElementById('avatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
                    document.getElementById('adminTab').classList.toggle('hidden', user.id !== ADMIN_ID);
                });
            }
        };
    </script>
</body>
</html>
